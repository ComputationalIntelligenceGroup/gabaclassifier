---
title: "GABAergic interneurons classifier"
author: "Bojan Mihaljevic"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Overview 

`gabaclassifier` classifies a given neuronal morphology into of of the following types: Chandelier, Martinotti, ...  It is simple to use. 

```{r}
library(gabaclassifier)
path <- 'neuron.swc'
layer <- '23'
# classify_interneuron(path, layer )
```

The arguments are explained below. 

# Installing 

It is straightforward from Github. `gabaclassifier` requires  `neuroimm`, `neurostrr` to be installed from Github. 

```{r, eval = FALSE}
devtool::install_github()
devtool::install_github()
``` 
It has only been tested on Ubuntu 16.04. 

# Input 
- A SWC/**ASC/DAT** reconstruction of a neuron morphology
- The layer containing that cell [optional]  [**not done yet**]
- Must not be layer 1, only 23. 

The layer information corresponds to male rat ... somatosensory cortex. If the cells corresponds to very different laminar distribution data, then the layer should be omitted and related morphometrics will not be computed. It is important that the morphology is of sufficient quality, as `gabaclassifier` performs only basic checks.
  
# Model 

## Data 
A random forest trained on **650** ...  The cells were classified into Ch, MC, by the Markam laboratory. 

- length? flat z? repetitions? 
- check apical? makes any sense? 
- minimum number of dendrites? that soma is present? 

An one-versus-all combination of random forest models provides somewhat better models for under-represented types. The accuracy is 72%. **Show the confusion matrix.**
The data and model building is explained in paper...Try oversampling? Not easy in multiclass.  No feature selection currently (OK with random forest).    

# Usage 
The only relevant functions is the `classify_interneuron`. The layer and path to file. The outut types are ... 

Allowed values for layer are...(character)
The types are MC = martinotti etc. ...   

Not all morphologies are valid and basic checks are performed.  Thus, 
```{r}

```


# Future work  
- **Basic morphology checks, such as axonal length, to perform before classifying an interneuron.** 
- Output confidence in prediction? 
